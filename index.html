<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <title>Paym · QRIS Payment</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
    />
    <style>
      :root {
        --bg: #020617;
        --bg-card: rgba(15, 23, 42, 0.97);
        --fg: #e5e7eb;
        --fg-soft: #9ca3af;
        --accent: #22c55e;
        --accent-blue: #38bdf8;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        min-height: 100vh;
        font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont,
          "Segoe UI", sans-serif;
        background: radial-gradient(circle at top, #1e293b 0, #020617 50%, #000 100%);
        color: var(--fg);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 16px;
      }
      .shell {
        width: 100%;
        max-width: 960px;
        display: grid;
        grid-template-columns: minmax(0, 1.1fr) minmax(0, 1fr);
        gap: 18px;
      }
      @media (max-width: 768px) {
        .shell {
          grid-template-columns: minmax(0, 1fr);
        }
      }
      .card,
      .qr-card {
        background: var(--bg-card);
        border-radius: 20px;
        padding: 22px 20px;
        border: 1px solid rgba(148, 163, 184, 0.3);
        box-shadow: 0 22px 60px rgba(15, 23, 42, 0.9);
      }
      .header-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 8px;
        margin-bottom: 4px;
      }
      h1 {
        margin: 0;
        font-size: 1.2rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .logo-pill {
        width: 26px;
        height: 26px;
        border-radius: 999px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, #22c55e, #16a34a);
        color: #e5e7eb;
        font-size: 16px;
      }
      .env-pill {
        font-size: 0.72rem;
        padding: 4px 9px;
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.4);
        color: var(--fg-soft);
        display: inline-flex;
        align-items: center;
        gap: 6px;
      }
      .env-dot {
        width: 7px;
        height: 7px;
        border-radius: 999px;
        background: #22c55e;
        box-shadow: 0 0 10px rgba(34, 197, 94, 0.7);
      }
      .sub {
        color: var(--fg-soft);
        font-size: 0.83rem;
        margin-bottom: 16px;
      }
      .section-title {
        font-size: 0.8rem;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        color: var(--fg-soft);
        margin-bottom: 6px;
      }
      label {
        font-size: 0.86rem;
        display: block;
        margin-bottom: 4px;
      }
      .input-group {
        margin-bottom: 12px;
      }
      input {
        width: 100%;
        padding: 9px 11px;
        border-radius: 10px;
        border: 1px solid rgba(148, 163, 184, 0.5);
        background: rgba(15, 23, 42, 0.9);
        color: var(--fg);
        outline: none;
        font-size: 0.9rem;
      }
      input:focus {
        border-color: var(--accent-blue);
        box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.5);
      }
      .tiny-hint {
        font-size: 0.75rem;
        color: var(--fg-soft);
        margin-top: 3px;
      }
      button {
        margin-top: 14px;
        width: 100%;
        padding: 11px 14px;
        border-radius: 999px;
        border: none;
        background: linear-gradient(135deg, #22c55e, #16a34a);
        color: #ecfdf5;
        font-weight: 600;
        font-size: 0.9rem;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        box-shadow: 0 18px 32px rgba(21, 128, 61, 0.5);
        transition: transform 0.08s ease, box-shadow 0.08s ease,
          filter 0.08s ease;
      }
      button:hover:not(:disabled) {
        transform: translateY(-1px);
        filter: brightness(1.03);
        box-shadow: 0 22px 40px rgba(21, 128, 61, 0.7);
      }
      button:disabled {
        opacity: 0.6;
        cursor: default;
        box-shadow: none;
      }
      button svg {
        width: 16px;
        height: 16px;
      }
      .footer {
        margin-top: 18px;
        font-size: 0.75rem;
        color: var(--fg-soft);
        display: flex;
        justify-content: space-between;
        gap: 12px;
        align-items: center;
      }
      .footer code {
        font-size: 0.75rem;
        padding: 2px 6px;
        border-radius: 6px;
        background: rgba(15, 23, 42, 0.9);
        border: 1px solid rgba(31, 41, 55, 0.8);
      }
      .qr-header-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 8px;
        margin-bottom: 4px;
      }
      .qr-title {
        font-size: 0.88rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 6px;
      }
      .qr-title-pill {
        font-size: 0.7rem;
        padding: 2px 7px;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.9);
        border: 1px solid rgba(148, 163, 184, 0.4);
        color: var(--fg-soft);
      }
      .qr-wrapper {
        margin-top: 10px;
        margin-bottom: 10px;
        text-align: center;
      }
      .qr-wrapper img {
        width: min(260px, 70vw);
        height: auto;
        aspect-ratio: 1 / 1;
        object-fit: contain;
        border-radius: 14px;
        background: #020617;
        padding: 10px;
        border: 1px solid rgba(148, 163, 184, 0.45);
      }
      .qr-placeholder {
        width: min(260px, 70vw);
        height: min(260px, 70vw);
        border-radius: 14px;
        border: 1px dashed rgba(148, 163, 184, 0.6);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.8rem;
        color: var(--fg-soft);
        background: rgba(15, 23, 42, 0.85);
        margin: 0 auto;
        padding: 0 10px;
        text-align: center;
      }
      .info {
        font-size: 0.78rem;
        color: var(--fg-soft);
        margin-top: 4px;
      }
      .info-row {
        display: flex;
        justify-content: space-between;
        gap: 8px;
        margin-top: 8px;
        font-size: 0.78rem;
      }
      .info-value {
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
          "Liberation Mono", "Courier New", monospace;
        font-size: 0.8rem;
      }
      .amount-highlight {
        font-weight: 600;
        color: #bbf7d0;
      }
      .status {
        margin-top: 12px;
        font-size: 0.85rem;
      }
      .status span {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 3px 11px;
        border-radius: 999px;
        font-size: 0.76rem;
        letter-spacing: 0.08em;
        text-transform: uppercase;
      }
      .badge-pending {
        background: rgba(15, 23, 42, 0.95);
        border: 1px solid rgba(148, 163, 184, 0.5);
        color: var(--fg-soft);
      }
      .badge-paid {
        background: rgba(22, 163, 74, 0.95);
        border: 1px solid rgba(22, 163, 74, 1);
        color: #ecfdf5;
        box-shadow: 0 0 18px rgba(34, 197, 94, 0.7);
      }
      .badge-error {
        background: rgba(220, 38, 38, 0.95);
        border: 1px solid rgba(248, 113, 113, 1);
        color: #fee2e2;
      }
      .status-icon {
        width: 10px;
        height: 10px;
        border-radius: 999px;
      }
      .status-pending .status-icon {
        background: #eab308;
      }
      .status-paid .status-icon {
        background: #22c55e;
      }
      .status-error .status-icon {
        background: #fecaca;
      }
      @media (max-width: 768px) {
        .card,
        .qr-card {
          padding: 18px 16px;
        }
        .footer {
          flex-direction: column;
          align-items: flex-start;
        }
      }
    </style>
  </head>
  <body>
    <div class="shell">
      <!-- FORM KIRI -->
      <div class="card">
        <div class="card-inner">
          <div class="header-row">
            <h1>
              <span class="logo-pill">₽</span>
              <span>Paym · QRIS Payment</span>
            </h1>
            <div class="env-pill">
              <span class="env-dot"></span>
              AutoFT backend live
            </div>
          </div>

          <div class="sub">
            Masukkan nominal, lalu sistem akan generate QRIS dan auto-polling
            status pembayaran dari backend.
          </div>

          <div class="section-title">Pengaturan transaksi</div>

          <div class="input-group">
            <label for="amount">Nominal (Rp)</label>
            <input
              id="amount"
              type="number"
              min="100"
              step="100"
              placeholder="contoh: 50000"
            />
            <div class="tiny-hint">
              Nominal dikirim ke API AutoFT sebagai
              <code>amount</code>.
            </div>
          </div>

          <button id="btn-generate">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="1.8"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M12 5v14"></path>
              <path d="M5 12h14"></path>
            </svg>
            <span>Generate QRIS</span>
          </button>

          <div class="footer">
            <span>
              Frontend polling ±3 detik ke
              <code>GET /api/pay-status</code>.
            </span>
            <span>Ref & status real-time tampil di panel kanan.</span>
          </div>
        </div>
      </div>

      <!-- QR + STATUS KANAN -->
      <div class="qr-card">
        <div class="qr-card-inner">
          <div class="qr-header-row">
            <div class="qr-title">
              <span>QRIS Active Session</span>
              <span class="qr-title-pill">Realtime</span>
            </div>
          </div>

          <div class="qr-wrapper" id="qr-section" style="display: none">
            <img id="qr-img" alt="QRIS" />
          </div>

          <div class="qr-wrapper" id="qr-placeholder">
            <div class="qr-placeholder">
              Belum ada QR. Isi nominal di kiri & klik
              <strong>Generate QRIS</strong>.
            </div>
          </div>

          <div class="info">
            <div class="info-row">
              <span>Ref</span>
              <span class="info-value"><code id="ref-text">—</code></span>
            </div>
            <div class="info-row">
              <span>Nominal</span>
              <span class="info-value amount-highlight"
                ><span id="amount-text">—</span></span
              >
            </div>
          </div>

          <div class="status" id="status-box">
            <!-- diisi js/script.js -->
          </div>
        </div>
      </div>
    </div>

    <script src="js/script.js"></script>
  </body>
</html>